# リサーチ: 招待コード & ユーザー写真アップロード

日付: 2025-09-14
仕様: /Users/lupisys/dev_project/fujii-photo-calendar/specs/004-invitation-code-and/spec.md

## 決定事項
- ディープリンク: カスタムスキーム fujii://invite?code={CODE} を採用。Universal Links は今回は対象外。
- ビューアのスコープ: オーナー可視の写真と同一範囲。権限は閲覧のみ。
- アップロードのメタデータ: 本機能では capturedAt と任意メモのみ記録。
- 受け入れ形式: 画像であれば形式制限なし。本機能内でサイズ上限は設けない。
- 保持: アクセスログは90日保持し自動削除。発行者の削除要請時は即時削除。
- プラットフォーム: iOS/Android の共有メニューからアップロードをサポート。

## 根拠
- カスタムスキームはドメイン設定なしで簡易なルーティングを実現。
- 閲覧専用スコープは安全性と実装の簡潔性に寄与。
- 最小限のメタデータで要件を満たしつつ実装を軽量化。
- 幅広い画像受け入れは摩擦を低減。実際の制約はプラットフォームに従う。
- 90日保持はトラブルシュートとプライバシーのバランス。

## 代替案の検討
- Universal Links / App Links: ドメイン・証明書の準備が必要なため後続フェーズに延期。
- リッチメタデータ（EXIF, GPS）: 重要度が低いため後続に延期。
- 厳格なサイズ/形式制限: 現段階では不要。プラットフォーム制約のみ適用。

## 未決事項（なし）
仕様内の不明点はすべて解消済み。
